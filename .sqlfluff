# Based on https://github.com/sqlfluff/sqlfluff/blob/2.3.5/src/sqlfluff/core/default_config.cfg

[sqlfluff]
dialect = clickhouse
templater = dbt
exclude_rules = aliasing.forbid, references.from, structure.column_order, structure.using
max_line_length = 100

[sqlfluff:indentation]
indent_unit = space
tab_space_size = 4

[sqlfluff:layout:type:comma]
spacing_before = touch
line_position = trailing

[sqlfluff:rules:capitalisation.functions]
capitalisation_policy = lower
# Based on https://clickhouse.com/docs/en/sql-reference (v23.10.5)
ignore_words = BLAKE3, CAST, CRC32, CRC32IEEE, CRC64, FQDN, IPv4CIDRToRange, IPv4NumToString, IPv4NumToStringClassC, IPv4StringToNum, IPv4StringToNumOrDefault, IPv4StringToNumOrNull, IPv4ToIPv6, IPv6CIDRToRange, IPv6NumToString, IPv6StringToNum, IPv6StringToNumOrDefault, IPv6StringToNumOrDefault, IPv6StringToNumOrNull, IPv6StringToNumOrNull, JSONArrayLength, JSONExtract, JSONExtractArrayRaw, JSONExtractBool, JSONExtractFloat, JSONExtractInt, JSONExtractKeys, JSONExtractKeysAndValues, JSONExtractKeysAndValuesRaw, JSONExtractRaw, JSONExtractString, JSONExtractUInt, JSONHas, JSONLength, JSONType, JSON_EXISTS, JSON_QUERY, JSON_VALUE, L1Distance, L1Norm, L1Normalize, L2Distance, L2Norm, L2Normalize, L2SquaredDistance, LinfDistance, LinfNorm, LinfNormalize, LpDistance, LpNorm, LpNormalize, MACNumToString, MACStringToNum, MACStringToOUI, MD4, MD5, SHA1, SHA224, SHA256, SHA512, ULIDStringToDateTime, URLHash, URLHierarchy, URLPathHierarchy, UUIDNumToString, UUIDStringToNum, YYYYMMDDToDate, YYYYMMDDToDate32, YYYYMMDDhhmmssToDateTime, YYYYMMDDhhmmssToDateTime64, accurateCast, accurateCastOrDefault, accurateCastOrNull, addDate, addDays, addHours, addMicroseconds, addMilliseconds, addMinutes, addMonths, addNanoseconds, addQuarters, addSeconds, addWeeks, addYears, addressToLine, addressToLineWithInlines, addressToSymbol, alphaTokens, anyHeavy, anyLast, appendTrailingCharIfAbsent, argMax, argMin, arrayAUC, arrayAll, arrayAvg, arrayCompact, arrayConcat, arrayCount, arrayCumSum, arrayCumSumNonNegative, arrayDifference, arrayDistinct, arrayElement, arrayEnumerate, arrayEnumerateDense, arrayEnumerateUniq, arrayExists, arrayFill, arrayFilter, arrayFirst, arrayFirstIndex, arrayFlatten, arrayFold, arrayIntersect, arrayJaccardIndex, arrayJoin, arrayJoin, arrayLast, arrayLastIndex, arrayMap, arrayMax, arrayMin, arrayPartialReverseSort, arrayPartialSort, arrayPopBack, arrayPopFront, arrayProduct, arrayPushBack, arrayPushFront, arrayRandomSample, arrayReduce, arrayReduceInRanges, arrayResize, arrayReverse, arrayReverseFill, arrayReverseSort, arrayReverseSplit, arrayRotateLeft, arrayRotateRight, arrayShiftLeft, arrayShiftRight, arraySlice, arraySort, arraySplit, arrayStringConcat, arraySum, arrayUniq, arrayWithConstant, arrayZip, assumeNotNull, avgWeighted, base58Decode, base58Encode, base64Decode, base64Encode, bitAnd, bitCount, bitHammingDistance, bitNot, bitOr, bitPositionsToArray, bitRotateLeft, bitRotateRight, bitShiftLeft, bitShiftRight, bitSlice, bitTest, bitTestAll, bitTestAny, bitXor, bitmapAnd, bitmapAndCardinality, bitmapAndnot, bitmapAndnotCardinality, bitmapBuild, bitmapCardinality, bitmapContains, bitmapHasAll, bitmapHasAny, bitmapMax, bitmapMin, bitmapOr, bitmapOrCardinality, bitmapSubsetInRange, bitmapSubsetLimit, bitmapToArray, bitmapTransform, bitmapXor, bitmapXorCardinality, bitmaskToArray, bitmaskToList, blockNumber, blockSerializedSize, blockSize, boundingRatio, buildId, byteHammingDistance, byteSize, byteSwap, catboostEvaluate, categoricalInformationValue, cityHash64, concatAssumeInjective, concatWithSeparator, concatWithSeparatorAssumeInjective, convertCharset, cosineDistance, countDigits, countEqual, countMatches, countSubstrings, covarPop, covarSamp, cramersV, cramersVBiasCorrected, currentDatabase, currentProfiles, currentRoles, currentUser, cutFragment, cutIPv6, cutQueryString, cutQueryStringAndFragment, cutToFirstSignificantSubdomain, cutToFirstSignificantSubdomainCustom, cutToFirstSignificantSubdomainCustomWithWWW, cutToFirstSignificantSubdomainWithWWW, cutURLParameter, cutWWW, dateName, dateTime64ToSnowflake, dateTimeToSnowflake, decodeHTMLComponent, decodeURLComponent, decodeURLFormComponent, decodeXMLComponent, defaultProfiles, defaultRoles, defaultValueOfArgumentType, defaultValueOfTypeName, deltaSum, deltaSumTimestamp, dictGet, dictGetAll, dictGetChildren, dictGetDescendant, dictGetHierarchy, dictGetOrDefault, dictGetOrNull, dictHas, dictIsIn, divideDecimal, domainWithoutWWW, dotProduct, dumpColumnStructure, editDistance, emptyArrayDate, emptyArrayDateTime, emptyArrayFloat32, emptyArrayFloat64, emptyArrayInt16, emptyArrayInt32, emptyArrayInt64, emptyArrayInt8, emptyArrayString, emptyArrayToSingle, emptyArrayUInt16, emptyArrayUInt32, emptyArrayUInt64, emptyArrayUInt8, enabledProfiles, enabledRoles, encodeURLComponent, encodeURLFormComponent, encodeXMLComponent, endsWith, endsWithUTF8, errorCodeToName, evalMLMethod, exponentialMovingAverage, extractAll, extractAllGroups, extractAllGroupsHorizontal, extractAllGroupsVertical, extractKeyValuePairs, extractKeyValuePairsWithEscaping, extractTextFromHTML, extractURLParameter, extractURLParameterNames, extractURLParameters, farmFingerprint64, farmHash64, filesystemAvailable, filesystemCapacity, filesystemFree, finalizeAggregation, firstLine, firstSignificantSubdomain, firstSignificantSubdomainCustom, formatDateTime, formatDateTimeInJodaSyntax, formatQuery, formatQuerySingleLine, formatReadableDecimalSize, formatReadableQuantity, formatReadableSize, formatReadableTimeDelta, formatRow, formatRowNoNewline, fromDaysSinceYearZero, fromDaysSinceYearZero32, fromModifiedJulianDay, fromModifiedJulianDayOrNull, fromUTCTimestamp, fromUnixTimestamp, fromUnixTimestamp64Micro, fromUnixTimestamp64Milli, fromUnixTimestamp64Nano, fromUnixTimestampInJodaSyntax, fuzzBits, gccMurmurHash, generateRandomStructure, generateULID, generateUUIDv4, geoDistance, geoToH3, geoToS2, geohashDecode, geohashEncode, geohashesInBox, getMacro, getOSKernelVersion, getServerPort, getSetting, getSizeOfEnumType, globalIn, globalNotIn, greatCircleAngle, greatCircleDistance, groupArray, groupArrayInsertAt, groupArrayLast, groupArrayMovingAvg, groupArrayMovingSum, groupArraySample, groupBitAnd, groupBitOr, groupBitXor, groupBitmap, groupBitmapAnd, groupBitmapOr, groupBitmapXor, groupUniqArray, h3CellAreaM2, h3CellAreaRads2, h3Distance, h3EdgeAngle, h3EdgeLengthKm, h3EdgeLengthM, h3ExactEdgeLengthKm, h3ExactEdgeLengthM, h3ExactEdgeLengthRads, h3GetBaseCell, h3GetDestinationIndexFromUnidirectionalEdge, h3GetFaces, h3GetIndexesFromUnidirectionalEdge, h3GetOriginIndexFromUnidirectionalEdge, h3GetResolution, h3GetResolution, h3GetUnidirectionalEdge, h3GetUnidirectionalEdgeBoundary, h3GetUnidirectionalEdgesFromHexagon, h3HexAreaKm2, h3HexAreaM2, h3HexRing, h3IndexesAreNeighbors, h3IsPentagon, h3IsResClassIII, h3IsValid, h3Line, h3NumHexagons, h3ToCenterChild, h3ToChildren, h3ToGeo, h3ToGeoBoundary, h3ToParent, h3ToString, h3UnidirectionalEdgeIsValid, h3kRing, halfMD5, hasAll, hasAny, hasColumnInTable, hasSubsequence, hasSubsequenceCaseInsensitive, hasSubsequenceCaseInsensitiveUTF8, hasSubsequenceUTF8, hasSubstr, hiveHash, hopEnd, hopStart, hostName, ifNotFinite, ifNull, indexHint, indexOf, initcapUTF8, initialQueryID, initializeAggregation, intDiv, intDivOrZero, intExp10, intExp2, intHash32, intHash64, intervalLengthSum, isConstant, isDecimalOverflow, isFinite, isIPAddressInRange, isIPv4String, isIPv6String, isInfinite, isNaN, isNotNull, isNull, isValidJSON, isValidUTF8, isZeroOrNull, javaHash, javaHashUTF16LE, joinGet, jsonMergePatch, jumpConsistentHash, kafkaMurmurHash, kolmogorovSmirnovTest, kurtPop, kurtSamp, largestTriangleThreeBuckets, leftPad, leftPadUTF8, lengthUTF8, logTrace, lowerUTF8, makeDate, makeDate32, makeDateTime, makeDateTime64, mapAdd, mapAll, mapApply, mapConcat, mapContains, mapContainsKeyLike, mapExists, mapExtractKeyLike, mapFilter, mapFromArrays, mapKeys, mapPopulateSeries, mapReverseSort, mapSort, mapSubtract, mapUpdate, mapValues, maxIntersections, maxIntersectionsPosition, maxMap, meanZTest, metroHash64, minMap, moduloOrZero, monthName, multiFuzzyMatchAllIndices, multiFuzzyMatchAny, multiFuzzyMatchAnyIndex, multiIf, multiMatchAllIndices, multiMatchAny, multiMatchAnyIndex, multiSearchAllPositions, multiSearchAllPositionsUTF8, multiSearchAny, multiSearchFirstIndex, multiSearchFirstPosition, multiplyDecimal, murmurHash2_32, murmurHash2_64, murmurHash3_128, murmurHash3_32, murmurHash3_64, ngramDistance, ngramMinHash, ngramMinHashArg, ngramMinHashArgCaseInsensitive, ngramMinHashArgCaseInsensitiveUTF8, ngramMinHashArgUTF8, ngramMinHashCaseInsensitive, ngramMinHashCaseInsensitiveUTF8, ngramMinHashUTF8, ngramSearch, ngramSimHash, ngramSimHashCaseInsensitive, ngramSimHashCaseInsensitiveUTF8, ngramSimHashUTF8, normalizeQuery, normalizeUTF8NFC, normalizeUTF8NFD, normalizeUTF8NFKC, normalizeUTF8NFKD, normalizedQueryHash, notEmpty, notEmpty, notEmpty, notILike, notIn, notLike, nowInBlock, nullIf, parseDateTime, parseDateTime32BestEffort, parseDateTime32BestEffortOrNull, parseDateTime32BestEffortOrZero, parseDateTime64BestEffort, parseDateTime64BestEffortOrNull, parseDateTime64BestEffortOrZero, parseDateTime64BestEffortUS, parseDateTime64BestEffortUSOrNull, parseDateTime64BestEffortUSOrZero, parseDateTimeBestEffort, parseDateTimeBestEffortOrNull, parseDateTimeBestEffortOrZero, parseDateTimeBestEffortUS, parseDateTimeBestEffortUSOrNull, parseDateTimeBestEffortUSOrZero, parseDateTimeInJodaSyntax, parseDateTimeInJodaSyntaxOrNull, parseDateTimeInJodaSyntaxOrZero, parseDateTimeOrNull, parseDateTimeOrZero, parseTimeDelta, pathFull, pointInEllipses, pointInPolygon, positionCaseInsensitive, positionCaseInsensitiveUTF8, positionUTF8, positiveModulo, quantileBFloat16, quantileBFloat16Weighted, quantileDeterministic, quantileExact, quantileExactHigh, quantileExactLow, quantileExactWeighted, quantileGK, quantileInterpolatedWeighted, quantileTDigest, quantileTDigestWeighted, quantileTiming, quantileTimingWeighted, queryID, queryString, queryStringAndFragment, randBernoulli, randBinomial, randCanonical, randChiSquared, randConstant, randExponential, randFisherF, randLogNormal, randNegativeBinomial, randNormal, randPoisson, randStudentT, randUniform, randomFixedString, randomPrintableASCII, randomString, randomStringUTF8, rankCorr, regexpExtract, regexpQuoteMeta, regionHierarchy, regionIn, regionToArea, regionToCity, regionToContinent, regionToCountry, regionToDistrict, regionToName, regionToPopulation, regionToTopContinent, reinterpretAsDate, reinterpretAsDateTime, reinterpretAsFixedString, reinterpretAsFloat32, reinterpretAsFloat64, reinterpretAsInt16, reinterpretAsInt32, reinterpretAsInt64, reinterpretAsInt8, reinterpretAsString, reinterpretAsUInt16, reinterpretAsUInt32, reinterpretAsUInt64, reinterpretAsUInt8, reinterpretAsUUID, replaceAll, replaceOne, replaceRegexpAll, replaceRegexpOne, reverseDNSQuery, reverseUTF8, rightPad, rightPadUTF8, roundAge, roundBankers, roundDown, roundDuration, roundToExp2, rowNumberInAllBlocks, rowNumberInBlock, runningAccumulate, runningConcurrency, runningDifference, runningDifferenceStartingWithFirstValue, s2CapContains, s2CapUnion, s2CellsIntersect, s2GetNeighbors, s2RectAdd, s2RectContains, s2RectIntersection, s2RectUnion, s2ToGeo, serverTimeZone, serverUUID, shardCount, shardNum, simpleLinearRegression, sipHash128, sipHash128Keyed, sipHash128Reference, sipHash128ReferenceKeyed, sipHash64, sipHash64Keyed, skewPop, skewSamp, sleepEachRow, snowflakeToDateTime, snowflakeToDateTime64, sparkBar, splitByChar, splitByNonAlpha, splitByRegexp, splitByString, splitByWhitespace, startsWith, startsWithUTF8, stddevPop, stddevSamp, stochasticLinearRegression, stochasticLinearRegression, stochasticLogisticRegression, stochasticLogisticRegression, stringJaccardIndex, stringJaccardIndexUTF8, stringToH3, structureToCapnProtoSchema, structureToProtobufSchema, studentTTest, subBitmap, subDate, substringIndex, substringIndexUTF8, substringUTF8, subtractDays, subtractHours, subtractMicroseconds, subtractMilliseconds, subtractMinutes, subtractMonths, subtractNanoseconds, subtractQuarters, subtractSeconds, subtractWeeks, subtractYears, sumCount, sumKahan, sumMap, sumWithOverflow, tcpPort, theilsU, throwIf, timeSlot, timeSlots, timeZone, timeZoneOf, timeZoneOffset, toColumnTypeName, toDate, toDate32, toDate32OrDefault, toDate32OrNull, toDate32OrZero, toDateOrDefault, toDateOrNull, toDateOrZero, toDateTime, toDateTime64, toDateTime64OrDefault, toDateTime64OrNull, toDateTime64OrZero, toDateTimeOrDefault, toDateTimeOrNull, toDateTimeOrZero, toDayOfMonth, toDayOfWeek, toDayOfYear, toDaysSinceYearZero, toDecimal128, toDecimal128OrDefault, toDecimal128OrNull, toDecimal128OrZero, toDecimal256, toDecimal256OrDefault, toDecimal256OrNull, toDecimal256OrZero, toDecimal32, toDecimal32OrDefault, toDecimal32OrNull, toDecimal32OrZero, toDecimal64, toDecimal64OrDefault, toDecimal64OrNull, toDecimal64OrZero, toDecimalString, toFixedString, toFloat128, toFloat128OrDefault, toFloat128OrNull, toFloat128OrZero, toFloat16, toFloat16OrDefault, toFloat16OrNull, toFloat16OrZero, toFloat256, toFloat256OrDefault, toFloat256OrNull, toFloat256OrZero, toFloat32, toFloat32OrDefault, toFloat32OrNull, toFloat32OrZero, toFloat64, toFloat64OrDefault, toFloat64OrNull, toFloat64OrZero, toFloat8, toFloat8OrDefault, toFloat8OrNull, toFloat8OrZero, toHour, toIPv4, toIPv4OrDefault, toIPv4OrNull, toIPv6, toIPv6OrDefault, toIPv6OrNull, toISOWeek, toISOYear, toInt128, toInt128OrDefault, toInt128OrNull, toInt128OrZero, toInt16, toInt16OrDefault, toInt16OrNull, toInt16OrZero, toInt256, toInt256OrDefault, toInt256OrNull, toInt256OrZero, toInt32, toInt32OrDefault, toInt32OrNull, toInt32OrZero, toInt64, toInt64OrDefault, toInt64OrNull, toInt64OrZero, toInt8, toInt8OrDefault, toInt8OrNull, toInt8OrZero, toIntervalDay, toIntervalHour, toIntervalMinute, toIntervalMonth, toIntervalQuarter, toIntervalSecond, toIntervalWeek, toIntervalYear, toJSONString, toLastDayOfMonth, toLastDayOfWeek, toLowCardinality, toMinute, toModifiedJulianDay, toModifiedJulianDayOrNull, toMonday, toMonth, toNullable, toQuarter, toRelativeDayNum, toRelativeHourNum, toRelativeMinuteNum, toRelativeMonthNum, toRelativeQuarterNum, toRelativeSecondNum, toRelativeWeekNum, toRelativeYearNum, toSecond, toStartOfDay, toStartOfFifteenMinutes, toStartOfFiveMinutes, toStartOfHour, toStartOfISOYear, toStartOfInterval, toStartOfMinute, toStartOfMonth, toStartOfQuarter, toStartOfSecond, toStartOfTenMinutes, toStartOfWeek, toStartOfYear, toString, toStringCutToZero, toTime, toTimeZone, toTypeName, toUInt128, toUInt128OrDefault, toUInt128OrNull, toUInt128OrZero, toUInt16, toUInt16OrDefault, toUInt16OrNull, toUInt16OrZero, toUInt256, toUInt256OrDefault, toUInt256OrNull, toUInt256OrZero, toUInt32, toUInt32OrDefault, toUInt32OrNull, toUInt32OrZero, toUInt64, toUInt64OrDefault, toUInt64OrNull, toUInt64OrZero, toUInt8, toUInt8OrDefault, toUInt8OrNull, toUInt8OrZero, toUTCTimestamp, toUUID, toUUIDOrDefault, toUUIDOrNull, toUUIDOrZero, toUnixTimestamp, toUnixTimestamp64Micro, toUnixTimestamp64Milli, toUnixTimestamp64Nano, toValidUTF8, toWeek, toYYYYMM, toYYYYMMDD, toYYYYMMDDhhmmss, toYear, toYearWeek, topK, topKWeighted, topLevelDomain, translateUTF8, trimBoth, trimLeft, trimRight, tryBase58Decode, tryBase64Decode, tryDecrypt, tumbleEnd, tumbleStart, tupleConcat, tupleDivide, tupleDivideByNumber, tupleElement, tupleHammingDistance, tupleMinus, tupleMultiply, tupleMultiplyByNumber, tupleNegate, tuplePlus, tupleToNameValuePairs, uniqCombined, uniqCombined64, uniqExact, uniqHLL12, uniqTheta, uniqThetaIntersect, uniqThetaNot, uniqThetaUnion, upperUTF8, varPop, varSamp, visibleWidth, visitParamExtractBool, visitParamExtractFloat, visitParamExtractInt, visitParamExtractRaw, visitParamExtractString, visitParamExtractUInt, visitParamHas, welchTTest, wordShingleMinHash, wordShingleMinHashArg, wordShingleMinHashArgCaseInsensitive, wordShingleMinHashArgCaseInsensitiveUTF8, wordShingleMinHashArgUTF8, wordShingleMinHashCaseInsensitive, wordShingleMinHashCaseInsensitiveUTF8, wordShingleMinHashUTF8, wordShingleSimHash, wordShingleSimHashCaseInsensitive, wordShingleSimHashCaseInsensitiveUTF8, wordShingleSimHashUTF8, xxHash32, xxHash64, zookeeperSessionUptime

[sqlfluff:rules:capitalisation.identifiers]
extended_capitalisation_policy = lower

[sqlfluff:rules:capitalisation.keywords]
capitalisation_policy = lower

[sqlfluff:rules:capitalisation.literals]
capitalisation_policy = lower

[sqlfluff:rules:layout.long_lines]
ignore_comment_lines = False

[sqlfluff:rules:references.consistent]
single_table_references = unqualified

[sqlfluff:rules:references.keywords]
ignore_words = name, uuid, year

[sqlfluff:rules:structure.subquery]
forbid_subquery_in = both

[sqlfluff:templater:jinja]
load_macros_from_path = macros/
